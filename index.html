<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perpustakaan Online â€” Demo</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Preloader dengan animasi 3D buku -->
    <div id="preloader">
        <div class="book-3d">
            <div class="book-cover">Perpustakaan Online</div>
            <div class="book-pages"></div>
        </div>
        <div class="loading-text">Memuat koleksi buku...</div>
    </div>

    <header>
        <div class="brand">
            <div class="logo">LB</div>
            <div>
                <div class="title">Perpustakaan Online â€” Demo</div>
                <div class="subtitle">Daftarkan akun, login, dan pinjam buku secara digital</div>
            </div>
        </div>

        <div class="controls">
            <div id="userInfo" class="muted small">Belum masuk</div>
            <button id="btnShowLogin">Login / Register</button>
            <button id="btnLogout" style="display:none">Logout</button>
            <button id="btnEditBooks" style="background: #27ae60; border: none; color: white; display: none;">Edit Buku</button>
            <button id="btnResetData" style="background: var(--danger); border: none; color: white;">Reset Data</button>
        </div>
    </header>

    <main>
        <aside class="sidebar">
            <div class="card">
                <h3>Profil</h3>
                <div id="profileArea" class="muted small">Silakan login untuk melihat profil.</div>
            </div>

            <div class="card">
                <h3>Pinjaman Aktif</h3>
                <div id="borrowList">Tidak ada pinjaman.</div>
            </div>

            <div class="card">
                <h3>Aturan Pinjam</h3>
                <ul class="muted small">
                    <li>Harus memiliki akun untuk meminjam</li>
                    <li>Durasi pinjam pilihan: 1 hingga 7 hari</li>
                    <li>Maksimum pinjaman bersamaan: 5 buku</li>
                    <li>Bisa mengembalikan lebih awal</li>
                </ul>
            </div>
        </aside>

        <section>
            <!-- Halaman Katalog (default) -->
            <div id="catalogPage" class="page active">
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px">
                        <div>
                            <h2 style="margin:0">Katalog Buku</h2>
                            <div class="muted small">Temukan buku yang Anda sukai</div>
                        </div>
                        <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
                            <input id="searchInput" placeholder="Cari judul atau penulis" style="width:200px" />
                            <select id="genreFilter" style="width:200px">
                                <option value="">Semua Genre</option>
                            </select>
                            <button id="randomizeBtn">ðŸ”€ Acak Buku</button>
                        </div>
                    </div>
                </div>

                <!-- Section Rekomendasi -->
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                        <h3 style="margin:0">ðŸ“š Rekomendasi untuk Anda</h3>
                        <div class="muted small">Buku pilihan khusus</div>
                    </div>
                    <div class="books-grid" id="recommendedGrid"></div>
                </div>

                <!-- Section Trending -->
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                        <h3 style="margin:0">ðŸ”¥ Sedang Trending</h3>
                        <div class="muted small">Paling banyak dipinjam</div>
                    </div>
                    <div class="books-grid" id="trendingGrid"></div>
                </div>

                <!-- Section Semua Buku -->
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                        <h3 style="margin:0">ðŸ“– Semua Buku</h3>
                        <div class="muted small" id="bookCountText">Menampilkan semua buku</div>
                    </div>
                    <div class="books-grid" id="booksGrid"></div>
                </div>

                <div class="card">
                    <h3>Riwayat & Kelola</h3>
                    <div id="historyArea" class="muted small">Riwayat peminjaman akan muncul di sini.</div>
                </div>
            </div>

            <!-- Halaman Detail Buku -->
            <div id="detailPage" class="page">
                <div class="card">
                    <button id="backToCatalog" class="back-btn">&larr; Kembali ke Katalog</button>
                    <div id="bookDetailContent"></div>
                </div>
            </div>

            <!-- Halaman Baca Buku -->
            <div id="readPage" class="page">
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
                        <button id="backFromRead" class="back-btn">&larr; Kembali</button>
                        <div>
                            <button id="downloadPdf" class="primary">ðŸ“¥ Download PDF</button>
                        </div>
                    </div>
                    <div id="bookReadContent">
                        <div class="pdf-viewer-container">
                            <iframe id="pdfViewer" width="100%" height="600px" frameborder="0"></iframe>
                        </div>
                        <div class="book-read-info">
                            <h2 id="readBookTitle"></h2>
                            <div class="muted" id="readBookAuthor"></div>
                            <div class="read-meta">
                                <div class="read-stat">
                                    <strong>Durasi Pinjam:</strong> <span id="readBorrowDuration"></span> hari
                                </div>
                                <div class="read-stat">
                                    <strong>Sisa Waktu:</strong> <span id="readTimeLeft"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>Demo: data disimpan di browser (localStorage). Untuk produksi butuh backend dan database nyata.</footer>

    <!-- Modal Terms & Conditions -->
    <div id="termsModal" class="modal">
        <div class="modal-content terms-modal">
            <div id="termsContent"></div>
        </div>
    </div>

    <!-- Modal Login -->
    <div id="loginModal" class="modal">
        <div class="modal-content" style="width:420px;max-width:96%">
            <div id="loginModalContent"></div>
            <div style="display:flex;justify-content:flex-end;margin-top:12px;gap:8px">
                <button id="loginModalCancel">Batal</button>
                <button id="loginModalOk" class="primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Modal Edit Buku -->
    <div id="editBooksModal" class="modal">
        <div class="modal-content" style="width:600px;max-width:96%;max-height:80vh;overflow-y:auto">
            <div id="editBooksContent"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>